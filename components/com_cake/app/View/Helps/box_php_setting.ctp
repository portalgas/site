<h1>PHP setting</h1><pre class="shell" rel="file php.ini">php -i | grep php.ini	Configuration File (php.ini) Path => /etc/php/7.4/cli	Loaded Configuration File => /etc/php/7.4/cli/php.ini</pre><pre class="shell" rel="file .ini">vi /etc/php/7.4/fpm/pool.d/www.confvi /etc/php/7.4/apache2/php.inivi /etc/php/7.4/fpm/php.ini </pre><pre class="shell" rel="file .ini di backup">vi /etc/php/7.4/fpm/php.ini.fractisvi /etc/php/7.4/apache2/php.ini.fractis</pre><table>	<tr>		<th>Chiave</th>		<th>Valore</th>		<th>Nota</th>	</tr>	<tr>		<td>zlib.output_compression</td>		<td>On</td>		<td>			<span style="color:red;">Importante per le prestazioni lente</span>: vedi "Test performace"			<br />Le pagine vengono compresse se il browser invia un header "Accept-Encoding: gzip (settare Joomla -> Configurazione globale -> Server: Gzip)		</td>	</tr>	<tr>		<td>max_execution_time</td>		<td>180</td>		<td></td>	</tr>	<tr>		<td>memory_limit</td>		<td>256M</td>		<td></td>	</tr>	<tr>		<td>output_buffering</td>		<td>8192</td>		<td></td>	</tr>	<tr>		<td>display_errors</td>		<td>Off</td>		<td></td>	</tr>	<tr>		<td>post_max_size</td>		<td>16M</td>		<td></td>	</tr>	<tr>		<td>max_input_time</td>		<td>180</td>		<td></td>	</tr>	<tr>		<td>upload_max_filesize</td>		<td>25M</td>		<td></td>	</tr>	<tr>		<td>default_socket_timeout</td>		<td>180</td>		<td></td>	</tr>	<tr>		<td>session.gc_maxlifetime</td>		<td>2880</td>		<td></td>	</tr>	<tr>		<td>display_startup_errors</td>		<td>Off</td>		<td></td>	</tr>	<tr>		<td>log_errors</td>		<td>On</td>		<td>			Indica se i messaggi di errore debbano essere registrati nell'errorlog del server o in error_log. Questo opzione dipende dal server.		</td>	</tr>	<tr>		<td>html_errors</td>		<td>Off</td>		<td>			Disabilita i tag HTML nei messaggi di errore. Il nuovo formato per i messaggi in HTML produce un testo cliccabile che dirige l'utente alla pagina che descrive l'errore o la funzione che generato l'errore.		</td>	</tr>	<tr>		<td>error_reporting</td>		<td>E_ALL & ~E_DEPRECATED & ~E_STRICT & ~E_NOTICE</td>		<td>Strict Standards: Only variables should be assigned by reference in ...</td>	</tr>	<tr>		<td>open_basedir</td>		<td></td>		<td></td>	</tr>	<tr>		<td>extension=php_fileinfo.dll</td>		<td>attivare per abilitare function</td>		<td>		<pre>$finfo = finfo_open(FILEINFO_MIME_TYPE); // return mime type ala mimetype extension$type = finfo_file ($finfo, $file1['tmp_name']);finfo_close($finfo);				</pre>		</td>	</tr>	<tr>		<td>date.timezone</td>		<td>Europe/Rome</td>		<td>Warning: date(): It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone.			<br /><br />incluso anche in AppController date_default_timezone_set('Europe/Rome');		</td>	</tr>	</table><!-- <h2>FastCgi</h2><a name="php_setting_fastcgi"></a><pre class="shell" rel="installazione e abilitazione modulo"># install apache2 libapache2-mod-fastcgi# ctrl se il modulo è già abilitatovi /etc/apache2/mods-enabledapt-get install libapache2-mod-fastcgi# se errore E: Package 'libapache2-mod-fastcgi' has no installation candidatevi /etc/apt/sources.listdeb http://us.archive.ubuntu.com/ubuntu/ quantal multiversedeb-src http://us.archive.ubuntu.com/ubuntu/ quantal multiversedeb http://us.archive.ubuntu.com/ubuntu/ quantal-updates multiversedeb-src http://us.archive.ubuntu.com/ubuntu/ quantal-updates multiverseapt-get update# abilito il moduloa2enmod fastcgi a2enmod actionsapache2ctl graceful</pre><pre class="shell" rel="configurazione /usr/lib/fcgi-bin/php.fcgi">export PHP_FCGI_CHILDREN=4export PHP_FCGI_MAX_REQUESTS=200export PHPRC="/etc/php5/apache2/php.ini"exec /usr/lib/fcgi-bin/chmod a+rx /usr/lib/fcgi-bin/php.fcgi-rwxr-xr-x 1 root root 135 Oct  4 22:57 /usr/lib/fcgi-bin/php.fcgi</pre><pre class="shell" rel="configurazione /etc/apache2/mods-enabled/fastcgi.conf">&lt;IfModule mod_fastcgi.c&gt;  AddHandler fastcgi-script .fcgi  #FastCgiWrapper /usr/lib/apache2/suexec  FastCgiIpcDir /var/lib/apache2/fastcgi        &lt;Directory "/var/www/"&gt;                AllowOverride None                Options +ExecCGI -MultiViews -Indexes                Order allow,deny                Allow from all        &lt;/Directory&gt;&lt;/IfModule&gt;</pre>   <pre class="shell" rel="configurazione degli host virtuali">cd /etc/apache2/sites-availableScriptAlias /fcgi-bin/ /usr/lib/fcgi-bin/&lt;Directory "/usr/lib/fcgi-bin" &gt;         AllowOverride All         Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch         Order allow,deny         Allow from all         SetHandler fastcgi-script&lt;/Directory&gt;/etc/init.d/apache2 restart</pre>Verifica in phpinfo.php <br />apache2handler -> apache version: Apache/x.x.x(Debian) mod_fastcgi	<h2>fastgci.conf</h2><pre class="shell">&lt;IfModule mod_fastcgi.c&gt;  AddHandler fastcgi-script .fcgi  #FastCgiWrapper /usr/lib/apache2/suexec  FastCgiIpcDir /var/lib/apache2/fastcgi&lt;/IfModule&gt;</pre>           <pre class="shell">actions.conf -> ../mods-available/actions.confactions.load -> ../mods-available/actions.loadalias.conf -> ../mods-available/alias.confalias.load -> ../mods-available/alias.loadauth_basic.load -> ../mods-available/auth_basic.loadauthn_file.load -> ../mods-available/authn_file.loadauthz_default.load -> ../mods-available/authz_default.loadauthz_groupfile.load -> ../mods-available/authz_groupfile.loadauthz_host.load -> ../mods-available/authz_host.loadauthz_user.load -> ../mods-available/authz_user.loadautoindex.conf -> ../mods-available/autoindex.confautoindex.load -> ../mods-available/autoindex.loadcgi.load -> ../mods-available/cgi.loaddeflate.conf -> ../mods-available/deflate.confdeflate.load -> ../mods-available/deflate.loaddir.conf -> ../mods-available/dir.confdir.load -> ../mods-available/dir.loadenv.load -> ../mods-available/env.loadfastcgi.conf -> ../mods-available/fastcgi.conffastcgi.load -> ../mods-available/fastcgi.load#fcgid.conf -> ../mods-available/fcgid.conf#fcgid.load -> ../mods-available/fcgid.loadmime.conf -> ../mods-available/mime.confmime.load -> ../mods-available/mime.loadnegotiation.conf -> ../mods-available/negotiation.confnegotiation.load -> ../mods-available/negotiation.loadphp5.conf -> ../mods-available/php5.confphp5.load -> ../mods-available/php5.loadreqtimeout.conf -> ../mods-available/reqtimeout.confreqtimeout.load -> ../mods-available/reqtimeout.loadrewrite.load -> /etc/apache2/mods-available/rewrite.loadsetenvif.conf -> ../mods-available/setenvif.confsetenvif.load -> ../mods-available/setenvif.loadstatus.conf -> ../mods-available/status.confstatus.load -> ../mods-available/status.load</pre>	--><h2>memcached</h2><a name="php_setting_memcached"></a><pre class="shell">/etc/memcached.confsystemctl status memcached</pre>=> stopped (piu' lento, per applicazioni distribuite)<h2>APC (Alternative PHP Cache)</h2><a name="php_setting_apc"></a>Alternative PHP Cache (APC) è una cache opcode libera ed open source per PHP. Il suo obiettivo è quello di fornire un framework aperto e robusto per il caching e ottimizzare il codice intermedio di PHP.<br />programma PHP viene eseguito dal motore Zend:<ul>	<li>1) Il primo passo è la lettura del codice PHP dal filesystem ed il suo spostamento in memoria.</li>	<li>2) Lexing: L’interno del codice php viene convertito in token o lexicons.</li>	<li>3) Parsing: Durante questa fase, i token vengono elaborati per ricavare delle espressioni significative.</li>	<li>4) Compilazione: Le espressioni derivate vengono compilate in opcodes.</li>	<li>5) Esecuzione: L’opcodes viene eseguito per ottenere il risultato finale.</li></ul>L’obiettivo di APC è bypassare i passaggi da 1 a 4, facendo da cache in un segmento di memoria condivisa i codici operativi generati e poi copiandoli nel processo di esecuzione in modo da Zend possa effettivamente eseguirli.<pre class="shell" rel="instalazione APC">apt-get install php-apcu/etc/init.d/apache2 restart</pre>