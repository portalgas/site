<?php$this->Html->addCrumb(__('Home'), ['controller' => 'Pages', 'action' => 'home']);$this->Html->addCrumb(__('List Suppliers'), array('controller' => 'SuppliersOrganizations', 'action' =>'index'));$this->Html->addCrumb(__('Edit Supplier Organization'),array('controller' => 'SuppliersOrganizations', 'action' => 'edit', $results['SuppliersOrganization']['id']));$this->Html->addCrumb(__('Edit SuppliersOrganizationJcontent'));echo $this->Html->getCrumbList(array('class'=>'crumbs'));?><div class="suppliers form"><div class="box-details">		<h2>Produttore</h2>	<table cellpadding = "0" cellspacing = "0">		<tr>			<th>Nome</th>			<th>Descrizione</th>			<?php 			if($user->organization['Organization']['hasFieldSupplierCategoryId']=='Y')				echo '<th>Categoria</th>';			?>					</tr>		<tr>			<td style="white-space:nowrap;"><?php echo $results['SuppliersOrganization']['name'];?></td>			<?php 			echo '<td style="white-space:nowrap;">';			if(empty($results['Supplier']['descrizione']))				echo '-';			else				echo $results['Supplier']['descrizione'];			echo '</td>';				if($user->organization['Organization']['hasFieldSupplierCategoryId']=='Y')				echo '<td style="white-space:nowrap;">'.$results['CategoriesSupplier']['name'].'</td>';			?>		</tr>	</table></div><?php echo $this->Form->create('SuppliersOrganizationsJcontent', array('id' => 'formGas', 'enctype' => 'multipart/form-data'));?>	<fieldset>		<legend><?php echo __('full_text'); ?></legend>			<?php			//echo $this->Form->input('intro_text');			echo '<div class="input text required">';			echo '<label>';			echo '<img width="150" class="print_screen" id="print_screen_supplier_article" src="'.Configure::read('App.img.cake').'/print_screen_supplier_article.jpg" title="" border="0" />';			echo '</label> ';			echo $this->Form->input('full_text', ['id' => 'full_text', 'label' => false, 'value' => $results['SuppliersOrganizationsJcontent']['text']]);			echo '</div>';			echo '<div class="input text">';			echo '<label>';			echo '</label> ';			echo $this->Form->input('Document.img1', array(								    'type' => 'file'								));											if(!empty($results['Supplier']['img1']) && file_exists(Configure::read('App.root').Configure::read('App.img.upload.content').'/'.$results['Supplier']['img1']))				echo '<img width="100" src="'.Configure::read('App.server').Configure::read('App.web.img.upload.content').'/'.$results['Supplier']['img1'].'" />';				else				echo 'immagine non presente';								echo $this->element('legendaSuppliersOrganizationsJcontentImg');													echo '</div>';			?>	</fieldset><?php echo $this->Form->hidden('supplier_organization_id',array('id' =>'supplier_organization_id', 'value'=> $results['SuppliersOrganization']['id']));echo $this->Form->hidden('text_intro_end',array('id' =>'text_intro_end', 'value'=> 0));echo $this->Form->submit(__('Exit'),  array('id' => 'action_exit', 'class' => 'buttonBlu', 'div'=> 'submitMultiple'));echo $this->Form->submit(__('Submit'),array('div'=> 'submitMultiple', 'class' => 'afterDisabled'));echo $this->Form->end();echo $this->element('print_screen_supplier');?></div><div class="actions">	<h3><?php echo __('Actions'); ?></h3>	<ul>		<li><?php echo $this->Html->link(__('List Suppliers Organization'), array('controller' => 'SuppliersOrganizations', 'action' => 'index'),array('class'=>'action actionReload'));?></li>	</ul></div><script type="text/javascript">var debug = false;var textMinLen = '<?php echo Configure::read('SupplierArticleMinLen');?>';var textIntroMinLen = '<?php echo Configure::read('SupplierArticleIntroMinLen');?>';function findChar(text, what, start) {  var index = text.indexOf(what, (start+1));  return index;}function ctrlLen() {	if(debug) console.log("ctrlLen() SupplierArticleIntroMinLen <?php echo Configure::read('SupplierArticleIntroMinLen');?> "); 	var text = $('#full_text').val();		var what = '.';	var start = 0;	var continua = true;	while(continua) {		index = findChar(text, what, start);		if(index== -1) {			if(debug) console.log("ctrlLen() index - non trovato . " + index);			continua = false;		}		else {			if(debug) console.log("ctrlLen() index - trovato a " + index);  			if(index >= textIntroMinLen) 				continua = false;		}		start = index;	}		if(debug) console.log("ctrlLen() return " + start);		return start;} var sumbitJustSend = false;  $(document).ready(function() {	$('#action_exit').click(function() {			window.location.replace('<?php echo Configure::read('App.server').'/administrator/index.php?option=com_cake&controller=SuppliersOrganizations&action=index';?>');		return false;	});		$('#formGas').submit(function() {		if(sumbitJustSend) 			return false;				var full_text = $('#full_text').val();				if(full_text=='' || full_text==' ' || full_text=='<br />' || full_text=='<br>') {			full_text = '';			$('#full_text').val(full_text);								$('input[type="submit"].afterDisabled').val("Elaborazione in corso.. attendere...").unbind().css('cursor','default');			sumbitJustSend = true;								return true;		} 		else 		if(full_text.length < textMinLen) {			id = 'print_screen_supplier_article_ctrl';			gestioneModalSupplier(id);			// alert("Il testo descrittivo del produttore Ã¨ troppo corto!");			return false;		}						text_intro_end = ctrlLen();		if(text_intro_end < 0)			text_intro_end = 0; 		$('#text_intro_end').val(text_intro_end);				$('input[type="submit"].afterDisabled').val("Elaborazione in corso.. attendere...").unbind().css('cursor','default');		sumbitJustSend = true;						if(debug)			return false;		else			return true;	});});</script>