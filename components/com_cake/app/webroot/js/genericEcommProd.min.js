function activeEcommButtonPiu(m){var i=jQuery(m).parent().attr("id");var n=i.substring(i.indexOf("-")+1,i.lenght);var l=jQuery("#qta-"+n).html();if(l==""){l=0}l=parseInt(l);var j=parseInt(jQuery("#qta_multipli-"+n).val());l=(l+(1*j));var h=parseInt(jQuery("#qta_minima-"+n).val());if(l<h){l=h}if(!validitationQta(n,l)){return false}var k=jQuery("#prezzo-"+n).val();prezzoNew=number_format((k*l),2,",",".");jQuery("#prezzoNew-"+n).html(prezzoNew+"&nbsp;&euro;");jQuery("#qta-"+n).html(l);jQuery("#qta-"+n).removeClass("qtaZero");jQuery("#qta-"+n).addClass("qtaUno");jQuery("#submitEcomm-"+n).attr("style","opacity:1");jQuery("#msgEcomm-"+n).attr("style","opacity:1");jQuery("#msgEcomm-"+n).html("");jQuery("#submitEcomm-"+n).attr("src",app_img+"/apps/32x32/kfloppy.png");jQuery("#submitEcomm-"+n).css("cursor","pointer")}function activeEcommButtonMeno(m){var i=jQuery(m).parent().attr("id");var n=i.substring(i.indexOf("-")+1,i.lenght);var l=jQuery("#qta-"+n).html();if(l==0){return false}l=parseInt(l);var j=parseInt(jQuery("#qta_multipli-"+n).val());l=(l-(1*j));var h=parseInt(jQuery("#qta_minima-"+n).val());if(l<h){l=0}if(!validitationQta(n,l)){return false}var k=jQuery("#prezzo-"+n).val();prezzoNew=number_format((k*l),2,",",".");jQuery("#prezzoNew-"+n).html(prezzoNew+"&nbsp;&euro;");jQuery("#qta-"+n).html(l);if(l==0){jQuery("#qta-"+n).removeClass("qtaUno");jQuery("#qta-"+n).addClass("qtaZero")}jQuery("#submitEcomm-"+n).attr("style","opacity:1");jQuery("#msgEcomm-"+n).attr("style","opacity:1");jQuery("#msgEcomm-"+n).html("");jQuery("#submitEcomm-"+n).attr("src",app_img+"/apps/32x32/kfloppy.png");jQuery("#submitEcomm-"+n).css("cursor","pointer")}function managementCart(f,d,e){jQuery("#submitEcomm-"+f).attr("style","opacity:1");jQuery("#msgEcomm-"+f).attr("style","opacity:1");jQuery("#msgEcomm-"+f).html("");if(d=="OK"){jQuery("#submitEcomm-"+f).attr("src",app_img+"/actions/32x32/bookmark.png");jQuery("#submitEcomm-"+f).css("cursor","default");jQuery("#msgEcomm-"+f).html("Salvato!");jQuery("#submitEcomm-"+f).delay(1000).animate({opacity:0},1500);jQuery("#msgEcomm-"+f).delay(1000).animate({opacity:0},1500);if(jQuery("#cart-short").length>0){viewCartShort()}}else{if(d=="DELETE"){jQuery("#submitEcomm-"+f).attr("src",app_img+"/actions/32x32/blue_basket.png");jQuery("#submitEcomm-"+f).css("cursor","default");jQuery("#msgEcomm-"+f).html("Cancellato!");jQuery("#submitEcomm-"+f).delay(1000).animate({opacity:0},1500);jQuery("#msgEcomm-"+f).delay(1000).animate({opacity:0},1500)}else{if(d=="ERRORE-STATO-N"){jQuery("#submitEcomm-"+f).attr("src",app_img+"/blank32x32.png");jQuery("#submitEcomm-"+f).css("cursor","default");jQuery("#msgEcomm-"+f).html("");alert(e)}else{if(d=="ERRORE-QTAMIN"){jQuery("#submitEcomm-"+f).attr("src",app_img+"/blank32x32.png");jQuery("#submitEcomm-"+f).css("cursor","default");jQuery("#msgEcomm-"+f).html("");alert(e)}else{if(d=="ERRORE-QTAMAX"){jQuery("#submitEcomm-"+f).attr("src",app_img+"/blank32x32.png");jQuery("#submitEcomm-"+f).css("cursor","default");jQuery("#msgEcomm-"+f).html("");alert(e)}else{if(d=="ERRORE-QTAMAXORDER"){jQuery("#submitEcomm-"+f).attr("src",app_img+"/blank32x32.png");jQuery("#submitEcomm-"+f).css("cursor","default");jQuery("#msgEcomm-"+f).html("");alert(e)}else{if(d=="ERRORE-QTAMAXORDER-STOP"){jQuery("#submitEcomm-"+f).attr("src",app_img+"/blank32x32.png");jQuery("#submitEcomm-"+f).css("cursor","default");jQuery("#msgEcomm-"+f).html("");alert(e)}else{if(d=="ERRORE-LOCK-STOP"){jQuery("#submitEcomm-"+f).attr("src",app_img+"/blank32x32.png");jQuery("#submitEcomm-"+f).css("cursor","default");jQuery("#msgEcomm-"+f).html("");alert(e)}else{if(d=="OKIMPORTO"){jQuery("#submitEcomm-"+f).attr("src",app_img+"/actions/32x32/bookmark.png");jQuery("#submitEcomm-"+f).css("cursor","default");jQuery("#msgEcomm-"+f).html("Salvato!");jQuery("#submitEcomm-"+f).delay(1000).animate({opacity:0},1500);jQuery("#msgEcomm-"+f).delay(1000).animate({opacity:0},1500)}else{if(d=="NO"){jQuery("#submitEcomm-"+f).attr("src",app_img+"/apps/32x32/error.png");jQuery("#submitEcomm-"+f).css("cursor","default");jQuery("#msgEcomm-"+f).html("Errore!")}}}}}}}}}}}function validitationQta(a,c){var g=jQuery("#articleOrder_stato-"+a).val();var i=parseInt(jQuery("#qta_massima-"+a).val());var f=parseInt(jQuery("#qta_massima_order-"+a).val());var e=parseInt(jQuery("#qta_multipli-"+a).val());var h=parseInt(jQuery("#qta_cart-"+a).val());var d=parseInt(jQuery("#qta_prima_modifica-"+a).val());if(d==null||isNaN(d)){d=0}if(g=="LOCK"){if(c>d){alert("L'articolo è bloccato, non si possono aggiungere articoli.");c=(c-(1*e));jQuery("#qta-"+a).html(c);return false}}else{if(g=="QTAMAXORDER"){if(c>d){alert("Raggiunta la quantità massima che si può ordinare.");c=(c-(1*e));jQuery("#qta-"+a).html(c);return false}}}if(f>0){if(f>0&&(h-d+c)>f){alert("Raggiunta la quantità massima che si può ordinare.");c=(c-(1*e));jQuery("#qta-"+a).html(c);return false}}if(i>0){if(c>i){alert("Raggiunta la quantità massima che un singolo gasista può ordinare.");c=(c-(1*e));jQuery("#qta-"+a).html(c);return false}}return true}function ecommRowsValidation(q,p){var j=parseInt(jQuery("#qta-"+q).html());if(!validitationQta(q,j)){return false}var m=parseInt(jQuery("#qta_cart-"+q).val());var r=parseInt(jQuery("#qta_minima-"+q).val());var n=parseInt(jQuery("#qta_massima_order-"+q).val());var o=parseInt(jQuery("#qta_multipli-"+q).val());var l=parseInt(jQuery("#qta_prima_modifica-"+q).val());if(j>0&&(j<r)){alert("La quantità minima che si può ordinare è "+r);return false}if(n>0){if(n==l){justQTAMAXORDER=true}else{justQTAMAXORDER=false}if(j>l){if(justQTAMAXORDER){alert("Si è già raggiunto la quantità massima!");return false}if((m-l+j)>n){var k=(n-m);if(!confirm("Hai ordinato una quantità che supera la quantità di articolo disponibile\nDesideri continuare? Se SI, ti verrà assegnata la quantità di articolo disponibile: "+k+" pezzi.")){return false}}}}if((j%o)>0){alert("Si possono solo fare acquisti multipli di "+o);return false}return true}function activeEcommRows(b){jQuery(b).mouseenter(function(){jQuery(this).find(".buttonPiuMeno").css("display","inline")});jQuery(b).mouseleave(function(){if(jQuery(this).find(".submitEcomm").attr("src")==app_img+"/apps/32x32/kfloppy.png"){jQuery(this).find(".msgEcomm").html("Non hai salvato!");jQuery(this).find(".buttonPiuMeno").css("display","none")}else{jQuery(this).find(".submitEcomm").attr("src",app_img+"/blank32x32.png");jQuery(this).find(".msgEcomm").html("");jQuery(this).find(".buttonPiuMeno").css("display","none")}});jQuery(b).find(".buttonPiu").click(function(){activeEcommButtonPiu(this)});jQuery(b).find(".buttonMeno").click(function(){activeEcommButtonMeno(this)})};