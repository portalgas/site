function activeEcommButtonPiu(t){var a=$(t).parent().attr("id"),i=a.substring(a.indexOf("-")+1,a.lenght),m=$("#qta-"+i).html();""==m&&(m=0),m=parseInt(m),m+=1*parseInt($("#qta_multipli-"+i).val());var r=parseInt($("#qta_minima-"+i).val());if(m<r&&(m=r),!validitationQta(i,m))return!1;var o=$("#prezzo-"+i).val();prezzoNew=number_format(o*m,2,",","."),$("#prezzoNew-"+i).html(prezzoNew+"&nbsp;&euro;"),$("#qta-"+i).html(m),$("#qta-"+i).removeClass("qtaZero"),$("#qta-"+i).addClass("qtaUno"),$("#submitEcomm-"+i).attr("style","opacity:1"),$("#msgEcomm-"+i).attr("style","opacity:1"),$("#msgEcomm-"+i).html(""),$("#submitEcomm-"+i).attr("src",app_img+"/apps/32x32/kfloppy.png"),$("#submitEcomm-"+i).css("cursor","pointer")}function activeEcommButtonMeno(t){var a=$(t).parent().attr("id"),i=a.substring(a.indexOf("-")+1,a.lenght),m=$("#qta-"+i).html();if(0==m)return!1;if(m=parseInt(m),(m-=1*parseInt($("#qta_multipli-"+i).val()))<parseInt($("#qta_minima-"+i).val())&&(m=0),!validitationQta(i,m))return!1;var r=$("#prezzo-"+i).val();prezzoNew=number_format(r*m,2,",","."),$("#prezzoNew-"+i).html(prezzoNew+"&nbsp;&euro;"),$("#qta-"+i).html(m),0==m&&($("#qta-"+i).removeClass("qtaUno"),$("#qta-"+i).addClass("qtaZero")),$("#submitEcomm-"+i).attr("style","opacity:1"),$("#msgEcomm-"+i).attr("style","opacity:1"),$("#msgEcomm-"+i).html(""),$("#submitEcomm-"+i).attr("src",app_img+"/apps/32x32/kfloppy.png"),$("#submitEcomm-"+i).css("cursor","pointer")}function activeEcommButtonPiuCartsValidation(t){var a=$(t).parent().attr("id"),i=a.substring(a.indexOf("-")+1,a.lenght),m=$("#qta-"+i).html();""==m&&(m=0),m=parseInt(m);var r=parseInt($("#qta_multipli-"+i).val());m+=1*r;var o=parseInt($("#qta_minima-"+i).val());if(m<o&&(m=o),!validitationQta(i,m))return!1;var e=parseInt($("#differenza_da_ordinare-"+i).html());if(e<0&&(e=0),0==e)return alert("Il collo è stato completato"),!1;var s=$("#prezzo-"+i).val();prezzoNew=number_format(s*m,2,",","."),$("#prezzoNew-"+i).html(prezzoNew+"&nbsp;&euro;"),$("#qta-"+i).html(m),$("#qta-"+i).removeClass("qtaZero"),$("#qta-"+i).addClass("qtaUno");var n=1*r;m<=o&&(n=o),e-=n,$("#differenza_da_ordinare-"+i).html(e),0==e?($("#differenza_da_ordinare-"+i).removeClass("qtaEvidenza"),$("#differenza_da_ordinare-"+i).addClass("qtaUno")):($("#differenza_da_ordinare-"+i).removeClass("qtaUno"),$("#differenza_da_ordinare-"+i).addClass("qtaEvidenza")),$("#submitEcomm-"+i).attr("style","opacity:1"),$("#msgEcomm-"+i).attr("style","opacity:1"),$("#msgEcomm-"+i).html(""),$("#submitEcomm-"+i).attr("src",app_img+"/apps/32x32/kfloppy.png"),$("#submitEcomm-"+i).css("cursor","pointer")}function activeEcommButtonMenoCartsValidation(t){var a=$(t).parent().attr("id"),i=a.substring(a.indexOf("-")+1,a.lenght),m=$("#qta-"+i).html();if(0==m)return!1;m=parseInt(m);var r=parseInt($("#qta_multipli-"+i).val());m-=1*r;var o=parseInt($("#qta_minima-"+i).val());if(m<o&&(m=0),!validitationQta(i,m))return!1;var e=$("#prezzo-"+i).val();prezzoNew=number_format(e*m,2,",","."),$("#prezzoNew-"+i).html(prezzoNew+"&nbsp;&euro;"),$("#qta-"+i).html(m),0==m&&($("#qta-"+i).removeClass("qtaUno"),$("#qta-"+i).addClass("qtaZero"));var s=parseInt($("#differenza_da_ordinare-"+i).html()),n=1*r;m<o&&(n=o),s+=n,$("#differenza_da_ordinare-"+i).html(s),0==s?($("#differenza_da_ordinare-"+i).removeClass("qtaEvidenza"),$("#differenza_da_ordinare-"+i).addClass("qtaUno")):($("#differenza_da_ordinare-"+i).removeClass("qtaUno"),$("#differenza_da_ordinare-"+i).addClass("qtaEvidenza")),$("#submitEcomm-"+i).attr("style","opacity:1"),$("#msgEcomm-"+i).attr("style","opacity:1"),$("#msgEcomm-"+i).html(""),$("#submitEcomm-"+i).attr("src",app_img+"/apps/32x32/kfloppy.png"),$("#submitEcomm-"+i).css("cursor","pointer")}function managementCart(t,a,i){$("#submitEcomm-"+t).attr("style","opacity:1"),$("#msgEcomm-"+t).attr("style","opacity:1"),$("#msgEcomm-"+t).html(""),"OK"==a?($("#submitEcomm-"+t).attr("src",app_img+"/actions/32x32/bookmark.png"),$("#submitEcomm-"+t).css("cursor","default"),$("#msgEcomm-"+t).html("Salvato!"),$("#submitEcomm-"+t).delay(1e3).animate({opacity:0},1500),$("#msgEcomm-"+t).delay(1e3).animate({opacity:0},1500),$("#cart-short").length>0&&viewCartShort()):"DELETE"==a?($("#submitEcomm-"+t).attr("src",app_img+"/actions/32x32/blue_basket.png"),$("#submitEcomm-"+t).css("cursor","default"),$("#msgEcomm-"+t).html("Cancellato!"),$("#submitEcomm-"+t).delay(1e3).animate({opacity:0},1500),$("#msgEcomm-"+t).delay(1e3).animate({opacity:0},1500)):"ERRORE-STATO-N"==a?($("#submitEcomm-"+t).attr("src",app_img+"/blank32x32.png"),$("#submitEcomm-"+t).css("cursor","default"),$("#msgEcomm-"+t).html(""),alert(i)):"ERRORE-QTAMIN"==a?($("#submitEcomm-"+t).attr("src",app_img+"/blank32x32.png"),$("#submitEcomm-"+t).css("cursor","default"),$("#msgEcomm-"+t).html(""),alert(i)):"ERRORE-QTAMAX"==a?($("#submitEcomm-"+t).attr("src",app_img+"/blank32x32.png"),$("#submitEcomm-"+t).css("cursor","default"),$("#msgEcomm-"+t).html(""),alert(i)):"ERRORE-QTAMAXORDER"==a?($("#submitEcomm-"+t).attr("src",app_img+"/blank32x32.png"),$("#submitEcomm-"+t).css("cursor","default"),$("#msgEcomm-"+t).html(""),alert(i)):"ERRORE-QTAMAXORDER-STOP"==a?($("#submitEcomm-"+t).attr("src",app_img+"/blank32x32.png"),$("#submitEcomm-"+t).css("cursor","default"),$("#msgEcomm-"+t).html(""),alert(i)):"ERRORE-LOCK-STOP"==a?($("#submitEcomm-"+t).attr("src",app_img+"/blank32x32.png"),$("#submitEcomm-"+t).css("cursor","default"),$("#msgEcomm-"+t).html(""),alert(i)):"LIMIT-CASH"==a?($("#submitEcomm-"+t).attr("src",app_img+"/blank32x32.png"),$("#submitEcomm-"+t).css("cursor","default"),$("#msgEcomm-"+t).html(""),alert(i)):"OKIMPORTO"==a?($("#submitEcomm-"+t).attr("src",app_img+"/actions/32x32/bookmark.png"),$("#submitEcomm-"+t).css("cursor","default"),$("#msgEcomm-"+t).html("Salvato!"),$("#submitEcomm-"+t).delay(1e3).animate({opacity:0},1500),$("#msgEcomm-"+t).delay(1e3).animate({opacity:0},1500)):"NO"==a&&($("#submitEcomm-"+t).attr("src",app_img+"/apps/32x32/error.png"),$("#submitEcomm-"+t).css("cursor","default"),$("#msgEcomm-"+t).html("Errore!"))}function viewCalendar(t){var a="/?option=com_cake&controller=Deliveries&action=calendar_view&delivery_id="+t+"&format=notmpl";$("#calendar_view").load(a).animate({opacity:1},750),target=$("#calendar_view"),$("html, body").animate({scrollTop:target.offset().top},{duration:500,easing:"swing"})}function validitationQta(t,a){var i=$("#articleOrder_stato-"+t).val(),m=parseInt($("#qta_massima-"+t).val()),r=parseInt($("#qta_massima_order-"+t).val()),o=parseInt($("#qta_multipli-"+t).val()),e=parseInt($("#qta_cart-"+t).val()),s=parseInt($("#qta_prima_modifica-"+t).val());if((null==s||isNaN(s))&&(s=0),"LOCK"==i){if(a>s)return alert("L'articolo è bloccato, non si possono aggiungere articoli."),a-=1*o,$("#qta-"+t).html(a),!1}else if("QTAMAXORDER"==i&&a>s)return alert("Raggiunta la quantità massima che si può ordinare."),a-=1*o,$("#qta-"+t).html(a),!1;return r>0&&r>0&&e-s+a>r?(alert("Raggiunta la quantità massima che si può ordinare."),a-=1*o,$("#qta-"+t).html(a),!1):!(m>0&&a>m)||(alert("Raggiunta la quantità massima che un singolo gasista può ordinare."),a-=1*o,$("#qta-"+t).html(a),!1)}function ecommRowsValidation(t,a){var i=parseInt($("#qta-"+t).html());if(!validitationQta(t,i))return!1;var m=parseInt($("#qta_cart-"+t).val()),r=parseInt($("#qta_minima-"+t).val()),o=parseInt($("#qta_massima_order-"+t).val()),e=parseInt($("#qta_multipli-"+t).val()),s=parseInt($("#qta_prima_modifica-"+t).val());if(i>0&&i<r)return alert("La quantità minima che si può ordinare è "+r),!1;if(o>0&&(justQTAMAXORDER=o==s,i>s)){if(justQTAMAXORDER)return alert("Si è già raggiunto la quantità massima!"),!1;if(m-s+i>o)if(!confirm("Hai ordinato una quantità che supera la quantità di articolo disponibile\nDesideri continuare? Se SI, ti verrà assegnata la quantità di articolo disponibile: "+(o-m)+" pezzi."))return!1}return!(i%e>0)||(alert("Si possono solo fare acquisti multipli di "+e),!1)}function activeEcommRows(t){$(t).mouseenter(function(){$(this).find(".buttonPiuMeno").css("display","inline")}),$(t).mouseleave(function(){$(this).find(".submitEcomm").attr("src")==app_img+"/apps/32x32/kfloppy.png"?($(this).find(".msgEcomm").html("Non hai salvato!"),$(this).find(".buttonPiuMeno").css("display","none")):($(this).find(".submitEcomm").attr("src",app_img+"/blank32x32.png"),$(this).find(".msgEcomm").html(""),$(this).find(".buttonPiuMeno").css("display","none"))}),$(t).find(".buttonPiu").click(function(){activeEcommButtonPiu(this)}),$(t).find(".buttonMeno").click(function(){activeEcommButtonMeno(this)}),$(t).find(".buttonPiuCartsValidation").click(function(){activeEcommButtonPiuCartsValidation(this)}),$(t).find(".buttonMenoCartsValidation").click(function(){activeEcommButtonMenoCartsValidation(this)})}function viewCalendar(t){var a="/?option=com_cake&controller=Deliveries&action=calendar_view&delivery_id="+t+"&format=notmpl";$("#calendar_view").load(a).animate({opacity:1},750),target=$("#calendar_view"),$("html, body").animate({scrollTop:target.offset().top},{duration:500,easing:"swing"})}function settingEcommTotale(t,a){var i=parseFloat(0);$("."+t).each(function(a){var m=$(this),r=$(m).attr("data-attr-"+t);(r=numberToJs(r))>0&&(i=parseFloat(i)+parseFloat(r),i=parseFloat(i).toFixed(2))}),i=number_format(i,2,",","."),$("."+a).html(i+" €")}