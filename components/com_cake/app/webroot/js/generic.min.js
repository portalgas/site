var debug=false;function sottrazione(d,c){var e=0;var f=parseFloat(d)-parseFloat(c);e=Math.round(f*100)/100;return e}function actionTrView(a){jQuery(a).css("display","block");jQuery(a).click(function(){dataElement=jQuery(this).attr("action");dataElementArray=dataElement.split("-");var c=dataElementArray[0];var b=dataElementArray[1];if(dataElementArray[2]!=null){idElementRow=b+"-"+dataElementArray[2]}else{idElementRow=b}if(jQuery(this).hasClass("openTrView")){jQuery("td[id^=tdViewId-]").html("");jQuery(".actionTrView").each(function(){jQuery(this).removeClass("closeTrView");jQuery(this).addClass("openTrView")});jQuery(".trView").each(function(){jQuery(this).css("display","none")});jQuery(this).removeClass("openTrView");jQuery(this).addClass("closeTrView");if(jQuery("#trViewId-"+idElementRow).css("display")=="table-row"){jQuery("#trViewId-"+idElementRow).css("display","none");return false}jQuery("#tdViewId-"+idElementRow).html("");jQuery("#trViewId-"+idElementRow).css("min-height","50px");jQuery("#trViewId-"+idElementRow).toggle("slow");jQuery("#tdViewId-"+idElementRow).css("background",'url("'+app_img+'/ajax-loader.gif") no-repeat scroll center 0 transparent');if(isBackoffice()){url="/administrator/index.php?option=com_cake&controller=Ajax&action=view_"+c+"&id="+b+"&evidenzia=&format=notmpl"}else{url="/?option=com_cake&controller=Ajax&action=view_"+c+"&id="+b+"&evidenzia=&format=notmpl"}jQuery.ajax({type:"get",url:url,data:"",success:function(d){jQuery("#tdViewId-"+idElementRow).css("background","none repeat scroll 0 0 transparent");jQuery("#tdViewId-"+idElementRow).html(d)},error:function(d,f,e){jQuery("#tdViewId-"+idElementRow).css("background","none repeat scroll 0 0 transparent");jQuery("#tdViewId-"+idElementRow).html(f)}})}else{jQuery(this).addClass("openTrView");jQuery(this).removeClass("closeTrView");jQuery("#trViewId-"+idElementRow).toggle("fast");jQuery("#tdViewId-"+idElementRow).html("")}return false})}function actionTrConfig(a){jQuery(a).css("display","block");jQuery(a).click(function(){idElementRow=jQuery(this).attr("action");if(debug){console.log("idElementRow "+idElementRow)}if(jQuery(this).hasClass("openTrConfig")){if(debug){console.log("hasClass openTrConfig")}jQuery(".actionTrConfig").each(function(){jQuery(this).removeClass("closeTrConfig");jQuery(this).addClass("openTrConfig")});jQuery(".trConfig").each(function(){jQuery(this).css("display","none")});jQuery(this).removeClass("openTrConfig");jQuery(this).addClass("closeTrConfig");if(jQuery("#trConfigId-"+idElementRow).css("display")=="table-row"){jQuery("#trConfigId-"+idElementRow).css("display","none");return false}jQuery("#trConfigId-"+idElementRow).toggle("slow")}else{if(debug){console.log("hasClass closeTrConfig")}jQuery(this).addClass("openTrConfig");jQuery(this).removeClass("closeTrConfig");jQuery("#trConfigId-"+idElementRow).toggle("fast")}return false})}function actionNotaView(a){jQuery(a).css("display","block");jQuery(a).click(function(){dataElement=jQuery(this).attr("id");dataElementArray=dataElement.split("-");var f=dataElementArray[1];var e=jQuery("#actionTrView-"+f);var d=jQuery("#actionTrView-"+f).attr("action");actionArray=d.split("-");var c=actionArray[0];var b=actionArray[1];if(actionArray[2]!=null){idElementRow=b+"-"+actionArray[2]}else{idElementRow=b}if(jQuery(e).hasClass("openTrView")){jQuery(e).removeClass("openTrView");jQuery(e).addClass("closeTrView");if(jQuery("#trViewId-"+idElementRow).css("display")=="table-row"){jQuery("#trViewId-"+idElementRow).css("display","none");return false}jQuery(".trView").each(function(){jQuery(this).css("display","none")});jQuery("#tdViewId-"+idElementRow).html("");jQuery("#trViewId-"+idElementRow).css("min-height","50px");jQuery("#trViewId-"+idElementRow).toggle("slow");jQuery("#tdViewId-"+idElementRow).css("background",'url("'+app_img+'/ajax-loader.gif") no-repeat scroll center 0 transparent');if(isBackoffice()){url="/administrator/index.php?option=com_cake&controller=Ajax&action=view_"+c+"&id="+b+"&evidenzia=nota&format=notmpl"}else{url="/index.php?option=com_cake&controller=Ajax&action=view_"+c+"&id="+b+"&evidenzia=nota&format=notmpl"}jQuery.ajax({type:"get",url:url,data:"",success:function(g){jQuery("#tdViewId-"+idElementRow).css("background","none repeat scroll 0 0 transparent");jQuery("#tdViewId-"+idElementRow).html(g)},error:function(g,i,h){jQuery("#tdViewId-"+idElementRow).css("background","none repeat scroll 0 0 transparent");jQuery("#tdViewId-"+idElementRow).html(i)}})}else{jQuery(e).addClass("openTrView");jQuery(e).removeClass("closeTrView");jQuery("#trViewId-"+idElementRow).toggle("fast");jQuery("#tdViewId-"+idElementRow).html("")}return false})}function validateNumberField(c,a){var b=jQuery(c).val();if(b.length>0){b=numberToJs(b);if(!isNumber(b)){alert("Il campo "+a+" dev'essere indicato con un valore numerico");jQuery(c).val("");jQuery(c).focus();return false}return true}return false}function validateNumberPositiveField(c,a){var b=jQuery(c).val();if(b.length>0){b=numberToJs(b);if(!isNumber(b)){alert("Il campo "+a+" dev'essere indicato con un valore numerico");jQuery(c).val("");jQuery(c).focus();return false}if(b<0){alert("Il campo "+a+" NON puÃ² essere indicato con un valore negativo");jQuery(c).val("");jQuery(c).focus();return false}return true}return false}function setNumberFormat(b){var a=jQuery(b).val();if(a.length>0){a=numberToJs(a);jQuery(b).val(number_format(a,2,",","."))}}function numberToJs(a){if(a==undefined){return"0.00"}a=a.replace(".","");a=a.replace(",",".");return a}function isNumber(a){return !isNaN(parseFloat(a))&&isFinite(a)}function arrotondaNumero(a,b){var c=Math.round(a*Math.pow(10,b))/Math.pow(10,b);return c}function number_format(f,b,m,e){var a=f,l=isNaN(b=Math.abs(b))?2:b;var k=m==undefined?".":m;var o=e==undefined?",":e,p=a<0?"-":"";var h=parseInt(a=Math.abs(+a||0).toFixed(l))+"",g=(g=h.length)>3?g%3:0;return p+(g?h.substr(0,g)+o:"")+h.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+o)+(l?k+Math.abs(a-h).toFixed(l).slice(2):"")}function apriPopUp(a){jQuery("body").append('<div class="popupWrap"></div><div class="popup"></div>');jQuery(".popup").css("background",'url("'+app_img+'/ajax-loader.gif") no-repeat scroll center center transparent');jQuery(".popup").load(a,function(c,b,d){if(b=="error"){}if(b=="success"){jQuery(".popup").css("background","none repeat scroll 0 0 #efefef")}jQuery(".button-close").on("click",function(){var e=function(){jQuery(".popupWrap").remove();jQuery(".popup").remove()};jQuery(".popupWrap").css("display","hide");jQuery(".popupWrap").animate({opacity:0},200,e)})})}function getHost(){url=window.location.href;var a=url.split("/");var b=a[0]+"//"+a[2];return b}function isBackoffice(){url=window.location.href;var a=url.split("/");if(a[3]!=null&&a[3]=="administrator"){return true}else{return false}}function compare_date_today(b){if(b!=undefined&&b.indexOf("-")>0){esito=true;arr=b.split("-");if(arr[0]!=undefined){anno=arr[0]}else{esito=false}if(arr[1]!=undefined){mese=arr[1]}else{esito=false}if(arr[2]!=undefined){giorno=arr[2]}else{esito=false}b=anno+mese+giorno}var a=new Date();var d=""+a.getDate();if(d.length==1){d="0"+d}var c=""+(a.getMonth()+1);if(c.length==1){c="0"+c}var e=""+a.getFullYear();a=e+c+d;return compare_date(b,a)}function compare_date(a,b){if(a<b){return"<"}else{if(a==b){return"="}else{return">"}}}function validateEmail(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)};