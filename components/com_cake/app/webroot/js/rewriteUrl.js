/* * non piu' utilizzato, riscrittura degli url fatto lato server in Lib/Routing/Router.php url() *  * in View/Layout/default.php default_front_end.php richiamavo reWriteUrl(app_path); */function reWriteUrl(pathFrontEndOrBackOffice) { 	/* riscrivo H R E F */	jQuery(".cakeContainer a").each(function() {		if(!jQuery(this).hasClass("noReWriteUrl")) {			var url = jQuery(this).attr("href");			if(url!=null && 					url.indexOf('#')!=0 && url.indexOf('javascript:')!=0 && 					url.indexOf('mailto:')!=0 && url.indexOf('skype:')!=0 &&					url.indexOf('http://')!=0 && url.indexOf('https://')!=0 && 					url.indexOf('option=com_content')==-1) {				url = getUrlCodificatoTOCakeRequest(url,pathFrontEndOrBackOffice);				jQuery(this).attr("href",url);			}		}	});				/* riscrivo F O R M */	jQuery(".cakeContainer form").each(function() {		/* method G E T */    	if(jQuery(this).attr('method')=='get') {    		      	var actionForm = jQuery(location).attr('href'); // jQuery(this).attr('action');	      		      	if(actionForm!=null && actionForm.indexOf('?')>0) {	           actionForm = actionForm.substring(actionForm.indexOf("?")+1,actionForm.length);	           var actionFormArr = actionForm.split('&');	    	       	    	   /* 	    	   	per ogni key=value creo input type=hidden 	    	   	tranne per i key che iniziano per Filter...	    	   */    	           for (var k in actionFormArr){	                if (actionFormArr.hasOwnProperty(k) && 	                	actionFormArr[k].indexOf('Filter')==-1 && 	                	actionFormArr[k].indexOf('_method')==-1 ) { 	                    var actionFormArr2 = actionFormArr[k].split('=');	                      jQuery('<input>').attr({	                            type: 'hidden',	                            id: actionFormArr2[0],	                            name: actionFormArr2[0],	                            value: actionFormArr2[1] 	                        }).appendTo(this);               	                 }	               }	    	   }     	}    	else {    		/* method P O S T    to   action  D E L E T E */     		var url = jQuery(this).attr('action');     		if(url.indexOf('/delete/')>0) {	    		url = getUrlCodificatoTOCakeRequest(url,pathFrontEndOrBackOffice);	    		jQuery(this).attr('action',url);	    	}    	}	});}/*da /.Configure::read('App.dominio')./Users/admin_index/sort:username/direction:asc/page:5?option=com_cake   /.Configure::read('App.dominio')./Users/admin_edit/100?option=com_cake   /.Configure::read('App.dominio')./articles/index?FilterArticleCategoryId=2?option=com_cake&controller=Articles&action=context_articles_index   a  /.Configure::read('App.dominio')./administrator/index.php?option=com_cake&controller=Articles&action=edit&id=3346&sort:name&direction:asc   */	function getUrlCodificatoTOCakeRequest(url,pathFrontEndOrBackOffice) {	return;		var result = url;	 	if(url=="") return result;		/* ctrl quanti ? ci sono nell'url 	*  $this->Html->link('title',array('controller'=>'articles''?'=>array('FilterArticleCategoryId'=>2))); 	*  genera /.Configure::read('App.dominio')./articles/index?FilterArticleCategoryId=2?option=com_cake&controller=Articles&action=context_articles_index	*/	totInterrogativi=0;	for (i=0;i<url.length;i++)	{		if (url[i] == "?") {			totInterrogativi++;		}	}		if(totInterrogativi==2) {		/* 			da /.Configure::read('App.dominio')./articles/index?FilterArticleCategoryId=2?option=com_cake&controller=Articles&action=context_articles_index			a  /.Configure::read('App.dominio')./articles/index?option=com_cake&controller=Articles&action=context_articles_index&FilterArticleCategoryId=2 		*/		urlIni = url.substring(0,url.indexOf("?"));		url = url.substring(url.indexOf("?")+1,url.lenght);		url = urlIni+"?"+url.substring(url.indexOf("?")+1,url.lenght)+"&"+url.substring(0,url.indexOf("?"));	}			var queryString = url.substring(url.indexOf("?")+1,url.lenght);	var path = url.substring(0,url.indexOf("?"));		/* 	 * tratto PATH (pulisco URL da queryString e Dominio)	 */	if(path.indexOf("/")==0)		 path = path.substring(new String("/").length,path.lenght);	if(path=="/") path = '/'+pathFrontEndOrBackOffice+'?option=com_cake';	else { 		 var arrPath = path.split( '/' );		 		 var controller = '';		 var action = 'index';		 var params = '';		 for (var i = 0; i < arrPath.length; i++) {			switch(i) {			  case 0:			    			  break; 			  case 1: /* C O N T R O L L E R */			    controller = arrPath[i];			  break; 			  case 2:  /* A C T I O N */			  	  action = arrPath[i];				  var strFonud = new String("admin_");				  if(action.indexOf(strFonud)==0)				    action = action.substring(strFonud.length,action.length);			  break; 			  default:   /* P A R A M S */				 /* 				 	/.Configure::read('App.dominio')./Users/admin_index/sort:username/direction:asc				 	/.Configure::read('App.dominio')./Users/admin_edit/100				 */		 		if(arrPath[i].indexOf(':')>0)		 			params = params + "&"+arrPath[i];		 		else		 			params = params + "&id="+arrPath[i];			}		 }				 result = '/'+pathFrontEndOrBackOffice+'?option=com_cake&controller='+controller+'&action='+action+params;	}	/* 	 * tratto eventuale QUERY STRING 	 *			senza option / controller / action / sort / direction / page	 *			con FilterArticleCategoryId	 */	if(queryString!=null) { 		var arrQueryString = queryString.split('&');		var newQueryString = '';		for (var k in arrQueryString){		   if (arrQueryString.hasOwnProperty(k) && arrQueryString[k].indexOf('Filter')>=0) 		    	newQueryString += '&'+arrQueryString[k];		}				result += newQueryString;	}			return result;}